(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"391e":function(e,t,a){"use strict";a("5508")},5508:function(e,t,a){},"56b4":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"min-h-screen my-register-container sm:pt-12"},[a("div",{class:["relative px-8 h-auto pt-10 pb-8 bg-white shadow-xl ring-1 ring-gray-900/5 sm:max-w-lg sm:mx-auto sm:rounded-lg sm:px-10",e.isMobile?"min-h-screen":""]},[a("div",{staticClass:"mx-auto"},[a("div",{staticClass:"divide-y divide-gray-300/50"},[a("div",{staticClass:"pt-8"},[a("q-form",{staticClass:"q-gutter-md"},[a("div",[a("q-input",{attrs:{"bottom-slots":"",label:e.$t("register.DistributorName"),"label-color":"teal-10"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.distributorName=""}}})]},proxy:!0}]),model:{value:e.distributorName,callback:function(t){e.distributorName=t},expression:"distributorName"}})],1),a("div",[a("q-input",{attrs:{"bottom-slots":"",label:e.$t("register.des"),"label-color":"teal-10"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.desc=""}}})]},proxy:!0}]),model:{value:e.desc,callback:function(t){e.desc=t},expression:"desc"}})],1),a("div",[a("q-input",{attrs:{"bottom-slots":"",label:e.$t("register.username"),"label-color":"teal-10"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.userName=""}}})]},proxy:!0}]),model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}})],1),a("div",[a("q-input",{attrs:{"bottom-slots":"",label:e.$t("register.email"),"label-color":"teal-10"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.emailAddress=""}}})]},proxy:!0}]),model:{value:e.emailAddress,callback:function(t){e.emailAddress=t},expression:"emailAddress"}})],1),a("div",[a("q-input",{attrs:{"bottom-slots":"",label:e.$t("register.phoneNumber"),"label-color":"teal-10",type:"number"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.mobilePhone=""}}})]},proxy:!0}]),model:{value:e.mobilePhone,callback:function(t){e.mobilePhone=t},expression:"mobilePhone"}})],1),a("div",[a("q-input",{attrs:{"bottom-slots":"",type:e.isPwd?"password":"text",label:e.$t("register.password"),"label-color":"teal-10"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.isPwd?"visibility_off":"visibility"},on:{click:function(t){e.isPwd=!e.isPwd}}}),a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.password=""}}})]},proxy:!0}]),model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)]),a("q-btn",{staticClass:"mt-3 full-width font-bold text-white",staticStyle:{background:"#2793ff"},attrs:{flat:"",size:"lg",label:e.$t("register.register"),"no-caps":""},on:{click:e.handleVerifyEmail}})],1)])]),a("q-inner-loading",{attrs:{showing:e.loadingShow}},[a("q-spinner-bars",{attrs:{size:"50px",color:"#64243B"}})],1),a("q-dialog",{attrs:{persistent:""},model:{value:e.showVerifyEmailDialog,callback:function(t){e.showVerifyEmailDialog=t},expression:"showVerifyEmailDialog"}},[a("q-card",{staticStyle:{"min-width":"350px"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("Verify")])]),a("q-card-section",{staticClass:"pt-0"},[a("div",[e._v("\n            Check your email: we sent you a verification code. Enter it here\n            to verify you' re really you.\n          ")])]),a("q-card-section",{staticClass:"q-pt-none"},[a("q-input",{attrs:{dense:"",autofocus:"",outlined:""},model:{value:e.emailCode,callback:function(t){e.emailCode="string"===typeof t?t.trim():t},expression:"emailCode"}})],1),a("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[a("div",{staticClass:"float-left flex-1 pl-1",on:{click:e.ResendEmailCode}},[e._v("\n            Don't see an email? Resend it.\n          ")]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel","no-caps":""}}),a("q-btn",{attrs:{flat:"",label:"Ok","no-caps":""},on:{click:e.registerUser}})],1)],1)],1)],1)])},i=[],r=a("750b"),o=a("ac79"),l=a("f53e"),n=a("45c1"),c=a("1840"),u=a("6eb7"),d=a("fadb"),m=Object(r["defineComponent"])({name:"Register",data(){return{isPwd:!0,isMobile:Object(d["a"])()}},mounted(){Object(d["b"])(this,"isMobile")},setup(e,{root:t}){const a=Object(r["ref"])(""),s=Object(r["ref"])(""),i=Object(r["ref"])(""),d=Object(r["ref"])(""),m=Object(r["ref"])(""),p=Object(r["ref"])(""),b=Object(r["ref"])(""),f=Object(r["ref"])(!1),{mutate:v}=Object(c["useMutation"])(l["c"]),{mutate:g}=Object(c["useMutation"])(n["p"]),{mutate:y}=Object(c["useMutation"])(n["i"]),{uuid:w}=t.$route.params,{mutate:h}=Object(c["useMutation"])(l["d"]),{mutate:q}=Object(c["useMutation"])(l["a"]),C=Object(r["ref"])(!1),k=Object(r["ref"])(""),x=async()=>{const e=await y({uuid:w});e&&(d.value=e.data.getOrgDistributorByUuid.name)},O=async()=>{try{if(!p.value)return u["a"].error(t.$t("register.DistributorNameRequire"));if(!b.value)return u["a"].error(t.$t("register.invaildName"));if(!o["a"].isEmail(a.value))return u["a"].error(t.$t("register.emailRequire"));if(!o["a"].isMobile(m.value))return u["a"].error(t.$t("register.PhoneRequire"));if(!s.value)return u["a"].error(t.$t("register.EnterNewPassword"));let e={name:b.value,email:a.value,phone:m.value,password:s.value,desc:i.value,avatarUrl:"https://file.sflow.pro/avatar_default.png"};const r=await g({distributorName:p.value,uuid:w,user:e});r&&u["a"].success(t.$t("register.registerSuccess"))}catch(e){u["a"].error(e.message)}};Object(r["onMounted"])((()=>{x()}));const j=async()=>{try{f.value=!0;const e={email:a.value,password:s.value,name:b.value,mobilephone:m.value,projectId:1,userType:1,desc:i.value};await q({email:a.value,code:k.value}),C.value=!1,await v({user:e}),u["a"].success("Registration is complete"),setTimeout((()=>{f.value=!1,t.$router.replace("/login")}),500)}catch(e){u["a"].error(e.message),f.value=!1}},N=async()=>{try{await h({email:a.value}),u["a"].success("Sent successfully")}catch(e){u["a"].error(e.message)}};return{registerUser:j,handleVerifyEmail:O,ResendEmailCode:N,password:s,distributorName:p,emailAddress:a,mobilePhone:m,userName:b,loadingShow:f,desc:i,showVerifyEmailDialog:C,emailCode:k,SuperiorName:d}},methods:{goBack(){this.$router.replace("/login")}}}),p=m,b=(a("391e"),a("2877")),f=a("0378"),v=a("27f9"),g=a("0016"),y=a("9c40"),w=a("74f7"),h=a("a154"),q=a("24e8"),C=a("f09f"),k=a("a370"),x=a("4b7e"),O=a("7f67"),j=a("eebe"),N=a.n(j),$=Object(b["a"])(p,s,i,!1,null,"12d84c8a",null);t["default"]=$.exports;N()($,"components",{QForm:f["a"],QInput:v["a"],QIcon:g["a"],QBtn:y["a"],QInnerLoading:w["a"],QSpinnerBars:h["a"],QDialog:q["a"],QCard:C["a"],QCardSection:k["a"],QCardActions:x["a"]}),N()($,"directives",{ClosePopup:O["a"]})}}]);
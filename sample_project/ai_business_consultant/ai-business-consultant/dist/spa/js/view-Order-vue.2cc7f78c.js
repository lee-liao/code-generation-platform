(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[25],{"2ab2":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"px-10 py-5"},[r("el-button",{staticClass:"float-right",staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:t.exportToExcel}},[t._v(t._s(t.$t("order.export")))]),r("el-table",{staticClass:"mt-3 mb-5",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","empty-text":t.$t("People.noData")}},[r("el-table-column",{attrs:{prop:"wxUserId",label:t.$t("order.userId"),align:"center","min-width":"100%"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",{staticStyle:{width:"100%",display:"flex","align-items":"center","justify-content":"left","margin-left":"10px"}},[r("j-avatar",{staticClass:"shadow-outline-white -ml-1",attrs:{size:28,avatarUrl:e.row.wxUser.avatarUrl,name:"xxxxx"}}),r("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.wxUser.name))])],1)]}}])}),r("el-table-column",{attrs:{prop:"out_trade_no",label:t.$t("order.orderNO"),align:"center","min-width":"100%"}}),r("el-table-column",{attrs:{prop:"goodsname",label:t.$t("order.goodsName"),align:"center","min-width":"100%"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.commodity.name)+"\n      ")]}}])}),r("el-table-column",{attrs:{prop:"createdAt",label:t.$t("order.createdAt"),align:"center","min-width":"100%"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t.format(e.row.createdAt))+"\n      ")]}}])}),r("el-table-column",{attrs:{prop:"state",label:t.$t("order.status"),align:"center","min-width":"100%"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t.handleState(e.row.state))+"\n      ")]}}])}),r("el-table-column",{attrs:{prop:"total",label:t.$t("order.total"),align:"center","min-width":"100%"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(0==e.row.total?"-":e.row.total/100)+"\n      ")]}}])}),5==t.currentUser.role&&t.currentUser.distributor.t1DistributorId?t._e():r("el-table-column",{attrs:{prop:"total",label:t.$t("order.PrimaryDistributor"),align:"center","min-width":"100%"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.wxUser.distributor?null!=e.row.wxUser.distributor.t1Distributor?e.row.wxUser.distributor.t1Distributor.name:e.row.wxUser.distributor.name:"-")+"\n      ")]}}],null,!1,2285462519)}),r("el-table-column",{attrs:{prop:"total",label:t.$t("order.SecondaryDistributors"),align:"center","min-width":"100%"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.wxUser.distributor&&e.row.wxUser.distributor.t1Distributor?e.row.wxUser.distributor.name:"-")+"\n      ")]}}])}),5==t.currentUser.role&&t.currentUser.distributor.t1DistributorId?t._e():r("el-table-column",{attrs:{prop:"total",label:t.$t("order.T1Divide"),align:"center","min-width":"100%"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(0==e.row.t1_share?"-":e.row.t1_share/1e4)+"\n      ")]}}],null,!1,1971871675)}),r("el-table-column",{attrs:{prop:"total",label:5==t.currentUser.role&&t.currentUser.distributor.t1DistributorId?t.$t("order.Divide"):t.$t("order.T2Divide"),align:"center","min-width":"100%"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(0==e.row.t2_share?"-":e.row.t2_share/1e4)+"\n      ")]}}])})],1),r("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[5,10,20,50],"page-size":t.pageSize,total:t.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},o=[],n=r("750b"),s=(r("ac79"),r("1840")),i=r("9b01"),l=(r("db56"),r("6eb7"),r("b850")),u=r("5a0c"),d=r.n(u),c=(r("8ee3"),r("25ca")),b=r("21a6"),p=r.n(b),m=r("fadb"),w=Object(n["defineComponent"])({name:"Login",data(){return{}},mounted(){Object(m["b"])(this,"isMobile")},setup(t,{root:e}){const r=Object(n["ref"])(1),a=Object(n["ref"])(10),o=Object(n["ref"])(0),u=Object(n["computed"])(l["b"].currentUser),{mutate:b}=Object(s["useMutation"])(i["b"]),{mutate:m}=Object(s["useMutation"])(i["c"]),w=Object(n["ref"])([]),_=async()=>{const t=await b();if(t){let e=[],r=[];r=5==u.value.role&&u.value.distributor.t1DistributorId?["用户","订单号","商品名称","下单时间","状态","金额","二级分销商","分成"]:["用户","订单号","商品名称","下单时间","状态","金额","一级分销商","二级分销商","t1分成","t2分成"];const a=t.data.getWxPaidOrders;a.forEach((t=>{let r;var a,o;5==u.value.role&&u.value.distributor.t1DistributorId?r={name:t.wxUser.name,orderId:t.out_trade_no,goodsname:null===(a=t.commodity)||void 0===a?void 0:a.name,createTime:g(t.createdAt),state:y(t.state),amount:0==t.total?"-":t.total/100,t2Distributor:t.wxUser.distributor&&t.wxUser.distributor.t1Distributor?t.wxUser.distributor.name:"-",t2Amount:0==t.t2_share?"-":t.t2_share/1e4}:r={name:t.wxUser.name,orderId:t.out_trade_no,goodsname:null===(o=t.commodity)||void 0===o?void 0:o.name,createTime:g(t.createdAt),state:y(t.state),amount:0==t.total?"-":t.total/100,t1Distributor:t.wxUser.distributor?null!=t.wxUser.distributor.t1Distributor?t.wxUser.distributor.t1Distributor.name:t.wxUser.distributor.name:"-",t2Distributor:t.wxUser.distributor&&t.wxUser.distributor.t1Distributor?t.wxUser.distributor.name:"-",t1Amount:0==t.t1_share?"-":t.t1_share/1e4,t2Amount:0==t.t2_share?"-":t.t2_share/1e4};e.push(r)}));const o=c["utils"].json_to_sheet(e);c["utils"].sheet_add_aoa(o,[r],{origin:"A1"});const n=c["utils"].book_new();c["utils"].book_append_sheet(n,o,"Sheet1");const s=c["write"](n,{bookType:"xlsx",type:"array"}),i=new Blob([s],{type:"application/octet-stream"});p.a.saveAs(i,"订单.xlsx")}},h=async()=>{const t=await m({take:a.value,skip:(r.value-1)*a.value});t&&(w.value=t.data.getWxPaidOrdersAndCount.data,o.value=t.data.getWxPaidOrdersAndCount.totalCount)},f=t=>{r.value=t,h()},x=t=>{a.value=t,h()},g=(t,e="YYYY/MM/DD  HH:mm:ss")=>t?d()(t).format(e):t,v=async()=>{window.open("https://open.bigmodel.cn/appcenter_v1/knowledge")},y=t=>{switch(t){case"SUCCESS":return"支付成功";case"USERPAYING":return"用户支付中";case"REFUND":return"转入退款";case"NOTPAY":return"未支付";case"CLOSED":return"已关闭";case"REFUND":return"转入退款"}},U=async t=>{window.open("https://open.bigmodel.cn/appcenter_v1/knowledge/"+t.id)};return Object(n["onMounted"])((()=>{h()})),{tableData:w,handleDetail:U,format:g,total:o,currentUser:u,handleManage:v,handleCurrentChange:f,handleSizeChange:x,pageSize:a,currentPage:r,handleState:y,exportToExcel:_}},methods:{exportExcelTable(){const t=r("25ca");var e,a={raw:!0},o=document.querySelector(".el-table__fixed");o?(e=t.utils.table_to_book(document.querySelector("#out-table").removeChild(o),a),document.querySelector("#out-table").appendChild(o)):e=t.utils.table_to_book(document.querySelector("#out-table"),a);var n=t.write(e,{bookType:"xlsx",bookSST:!0,type:"array"});try{p.a.saveAs(new Blob([n],{type:"application/octet-stream"}),"订单.xlsx")}catch(s){"undefined"!==typeof console&&console.log(s,n)}return n}}}),_=w,h=(r("a6a6"),r("2877")),f=Object(h["a"])(_,a,o,!1,null,"8fd869b8",null);e["default"]=f.exports},a6a6:function(t,e,r){"use strict";r("a6d6")},a6d6:function(t,e,r){}}]);
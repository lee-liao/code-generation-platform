(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"702b":function(t,e,a){},"8c2d":function(t,e,a){"use strict";a.r(e);var _=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[5==t.currentUser.role?a("div",{staticClass:"bg-white flex",staticStyle:{"margin-top":"30px"}},[a("div",{class:"w-1/4"},[a("div",{staticClass:"chart"},[a("div",{staticClass:"title"},[t._v(t._s(t.$t("Account.Lastmonthcommission")))]),a("div",{staticClass:"num-data"},[a("span",{staticStyle:{color:"#0747a6","font-size":"35px"}},[t._v("\n            "+t._s((t.accountInfo.lastMonthCommission/100).toFixed(2))+"\n          ")])])])]),a("div",{class:"w-1/4"},[a("div",{staticClass:"chart"},[a("div",{},[a("div",{staticClass:"title"},[t._v(t._s(t.$t("Account.Thismonthcommission")))])]),a("div",{staticClass:"num-data"},[a("span",{staticStyle:{color:"orange","font-size":"35px"}},[t._v("\n            "+t._s((t.accountInfo.currentMonthCommission/100).toFixed(2))+"\n          ")])])])]),a("div",{class:"w-1/4"},[a("div",{staticClass:"chart"},[a("div",{},[a("div",{staticClass:"title"},[t._v(t._s(t.$t("Account.Withdrawableamount")))])]),a("div",{staticClass:"num-data"},[a("span",{staticStyle:{color:"green","font-size":"35px"}},[t._v("\n            "+t._s((t.accountInfo.withdrawableAmount/1e4).toFixed(2))+"\n          ")])])])]),a("div",{staticClass:" container"},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleWithdrawal}},[t._v(t._s(t.$t("Account.Withdrawal")))]),a("el-button",{staticClass:"ml-10",on:{click:t.handleWithdrawalDetail}},[t._v("\n        "+t._s(t.$t("Account.WithdrawalLog")))])],1)]):t._e(),5==t.currentUser.role?a("div",{staticClass:"mt-3",staticStyle:{width:"100%",height:"400px"},attrs:{id:"chart"}}):t._e(),a("div",{staticStyle:{padding:"10px"}},[a("div",{staticClass:"num-data",staticStyle:{"font-size":"16px","font-weight":"bold"}},[t._v(t._s(5==t.currentUser.role?t.$t("Account.WithdrawalDetail"):t.$t("Account.SaleDetail")))]),a("el-date-picker",{staticClass:"mt-3",attrs:{type:"date",placeholder:"选择日期"},on:{change:t.handleChangeDate},model:{value:t.selectDate,callback:function(e){t.selectDate=e},expression:"selectDate"}}),a("el-table",{staticClass:"mt-5",staticStyle:{width:"100%"},attrs:{data:t.WithdrawalDetailData.slice((t.currentPage3-1)*t.pageSize3,t.currentPage3*t.pageSize3),border:"","cell-style":"padding-top: 5px; padding-bottom: 5px;","empty-text":t.$t("People.noData")}},[a("el-table-column",{attrs:{prop:"wxUserId",label:t.$t("order.userId"),align:"center","min-width":"100%"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{width:"100%",display:"flex","align-items":"center","justify-content":"left","margin-left":"10px"}},[a("j-avatar",{staticClass:"shadow-outline-white -ml-1",attrs:{size:28,avatarUrl:e.row.wxUser.avatarUrl,name:"xxxxx"}}),a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.wxUser.name))])],1)]}}])}),a("el-table-column",{attrs:{prop:"out_trade_no",label:t.$t("order.orderNO"),align:"center","min-width":"100%"}}),a("el-table-column",{attrs:{prop:"createdAt",label:t.$t("order.createdAt"),align:"center","min-width":"100%"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.format(e.row.createdAt))+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"total",label:t.$t("order.total"),align:"center","min-width":"100%"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(0==e.row.total?"-":e.row.total/100)+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"total",label:"t1分成",align:"center","min-width":"100%"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(0==e.row.t1_share?"-":e.row.t1_share/1e4)+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"total",label:"t2分成",align:"center","min-width":"100%"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(0==e.row.t2_share?"-":e.row.t2_share/1e4)+"\n        ")]}}])})],1),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[5,10,20,50],"page-size":t.pageSize,total:t.WithdrawalDetailData.length,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange3,"current-change":t.handleCurrentChange3}})],1),a("el-dialog",{staticClass:"channel-dialog",attrs:{"close-on-click-modal":!1,visible:t.detailDialog,title:t.$t("Account.WithdrawalLog"),width:"70%","append-to-body":!0},on:{"update:visible":function(e){t.detailDialog=e}}},[a("el-table",{staticClass:"mb-5",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","cell-style":"padding-top: 5px; padding-bottom: 5px;","empty-text":t.$t("People.noData")}},[a("el-table-column",{attrs:{prop:"amount",label:t.$t("Account.amount"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(" "+t._s((e.row.amount/100).toFixed(2))+" ")])]}}])}),a("el-table-column",{attrs:{prop:"createdAt",label:t.$t("Account.Date"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(" "+t._s(t.format(e.row.createdAt)))])]}}])}),a("el-table-column",{attrs:{prop:"approvedDate",label:t.$t("Account.ApproveDate"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(" "+t._s(t.format(e.row.approvedDate)))])]}}])}),a("el-table-column",{attrs:{prop:"batch_status",label:t.$t("Withdrawal.status"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.handleState(e.row.batch_status))+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"batch_status",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleDetail(e.row)}}},[t._v(t._s(t.$t("Account.detail")))])]}}])})],1),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[5,10,20,50],"page-size":t.pageSize,total:t.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{staticClass:"channel-dialog",attrs:{"close-on-click-modal":!1,visible:t.commissionDetailDialog,title:t.$t("Account.detail"),width:"70%","append-to-body":!0},on:{"update:visible":function(e){t.commissionDetailDialog=e}}},[a("el-table",{staticClass:"mb-5",staticStyle:{width:"100%"},attrs:{data:t.detailTableData.slice((t.currentPage2-1)*t.pageSize2,t.currentPage2*t.pageSize2),border:"","cell-style":"padding-top: 5px; padding-bottom: 5px;","empty-text":t.$t("People.noData")}},[a("el-table-column",{attrs:{prop:"wxUserId",label:t.$t("order.userId"),align:"center","min-width":"100%"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{width:"100%",display:"flex","align-items":"center","justify-content":"left","margin-left":"10px"}},[a("j-avatar",{staticClass:"shadow-outline-white -ml-1",attrs:{size:28,avatarUrl:e.row.wxUser.avatarUrl,name:"xxxxx"}}),a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.wxUser.name))])],1)]}}])}),a("el-table-column",{attrs:{prop:"out_trade_no",label:t.$t("order.orderNO"),align:"center","min-width":"100%"}}),a("el-table-column",{attrs:{prop:"createdAt",label:t.$t("order.createdAt"),align:"center","min-width":"100%"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.format(e.row.createdAt))+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"total",label:t.$t("order.total"),align:"center","min-width":"100%"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(0==e.row.total?"-":e.row.total/100)+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"total",label:"t1分成",align:"center","min-width":"100%"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(0==e.row.t1_share?"-":e.row.t1_share/1e4)+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"total",label:"t2分成",align:"center","min-width":"100%"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(0==e.row.t2_share?"-":e.row.t2_share/1e4)+"\n        ")]}}])})],1),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[5,10,20,50],"page-size":t.pageSize,total:t.detailTableData.length,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange2,"current-change":t.handleCurrentChange2}})],1)],1)},o=[],r=a("a0ae"),n=r["a"],i=(a("c746"),a("2877")),l=Object(i["a"])(n,_,o,!1,null,"7c4ff6f9",null);e["default"]=l.exports},a0ae:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("ddb0"),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_0__),echarts__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("313e"),_vue_composition_api__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("750b"),_store_store__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("b850"),_vue_apollo_composable__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("1840"),_vue_apollo_composable__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_vue_apollo_composable__WEBPACK_IMPORTED_MODULE_4__),dayjs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("5a0c"),dayjs__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_5__),src_utils_validator__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("ac79"),src_boot_notify__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("6eb7"),quasar_src_plugins_Dialog_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("436b"),quasar_src_plugins_Loading_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("f508"),src_graphql_queries_distributor__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("45c1");__webpack_exports__["a"]=Object(_vue_composition_api__WEBPACK_IMPORTED_MODULE_2__["defineComponent"])({data(){return{currentPage2:1,pageSize2:10,currentPage3:1,pageSize3:10}},setup(props,{root:root}){const option={title:{text:"最近一周金额统计"},tooltip:{},xAxis:{data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{},series:[{name:"金额（元）",type:"line",data:[120,200,150,80,70,110,130]}]},format=(t,e="YYYY/MM/DD  HH:mm:ss")=>t?dayjs__WEBPACK_IMPORTED_MODULE_5___default()(t).format(e):t,formatDateTime=(t,e="YYYY-MM-DD")=>t?dayjs__WEBPACK_IMPORTED_MODULE_5___default()(t).format(e):t,selectDate=Object(_vue_composition_api__WEBPACK_IMPORTED_MODULE_2__["ref"])(formatDateTime(new Date)),currentUser=Object(_vue_composition_api__WEBPACK_IMPORTED_MODULE_2__["computed"])(_store_store__WEBPACK_IMPORTED_MODULE_3__["b"].currentUser),total=Object(_vue_composition_api__WEBPACK_IMPORTED_MODULE_2__["ref"])(0),detailTableData=Object(_vue_composition_api__WEBPACK_IMPORTED_MODULE_2__["ref"])([]),strToJson=str=>{var json=eval("["+str+"]");return json?json[0]:[]},{mutate:getStaticMutation}=Object(_vue_apollo_composable__WEBPACK_IMPORTED_MODULE_4__["useMutation"])(src_graphql_queries_distributor__WEBPACK_IMPORTED_MODULE_10__["k"]),{mutate:getWxPaidOrdersByDateMutation}=Object(_vue_apollo_composable__WEBPACK_IMPORTED_MODULE_4__["useMutation"])(src_graphql_queries_distributor__WEBPACK_IMPORTED_MODULE_10__["o"]),{mutate:getBalanceMutation}=Object(_vue_apollo_composable__WEBPACK_IMPORTED_MODULE_4__["useMutation"])(src_graphql_queries_distributor__WEBPACK_IMPORTED_MODULE_10__["j"]),commissionDetailDialog=Object(_vue_composition_api__WEBPACK_IMPORTED_MODULE_2__["ref"])(!1),handleState=t=>{switch(t){case"PROCESSING":return"待审批";case"ACCEPTED":return"审批通过";case"FINISHED":return"提现完成"}},WithdrawalDetailData=Object(_vue_composition_api__WEBPACK_IMPORTED_MODULE_2__["ref"])([]),getWxPaidOrders=async()=>{const t=await getWxPaidOrdersByDateMutation({date:selectDate.value});t&&(WithdrawalDetailData.value=t.data.getWxPaidOrdersByDate)},handleChangeDate=async()=>{getWxPaidOrders()},handleDetail=t=>{detailTableData.value=t.t1WxPaidOrders.concat(t.t2WxPaidOrders),commissionDetailDialog.value=!0,console.log(t)},{mutate:getTwoMonthMutation}=Object(_vue_apollo_composable__WEBPACK_IMPORTED_MODULE_4__["useMutation"])(src_graphql_queries_distributor__WEBPACK_IMPORTED_MODULE_10__["n"]),{mutate:distributorApplyWxIncomeTransferMutation}=Object(_vue_apollo_composable__WEBPACK_IMPORTED_MODULE_4__["useMutation"])(src_graphql_queries_distributor__WEBPACK_IMPORTED_MODULE_10__["d"]),{mutate:getDistributorWithdrawFundsMutation}=Object(_vue_apollo_composable__WEBPACK_IMPORTED_MODULE_4__["useMutation"])(src_graphql_queries_distributor__WEBPACK_IMPORTED_MODULE_10__["h"]),getStatistics=async()=>{const t=await getStaticMutation({lastDate:7});let e=strToJson(t.data.getOrgDistributorCommissionStatistics);console.log(e);let a=[],_=[];for(const n of e)a.push(n.date),_.push(n.amount/1e4);option.xAxis.data=a.reverse(),option.series[0].data=_.reverse();const o=document.getElementById("chart"),r=echarts__WEBPACK_IMPORTED_MODULE_1__["a"](o);r.setOption(option),console.log(t)},accountInfo=Object(_vue_composition_api__WEBPACK_IMPORTED_MODULE_2__["ref"])({lastMonthCommission:1e4,currentMonthCommission:12e3,withdrawableAmount:8e3}),getBalance=async()=>{const t=await getBalanceMutation();t&&(accountInfo.value.withdrawableAmount=JSON.parse(t.data.getOrgDistributorCommissionBalance).amount),console.log(t)},currentPage=Object(_vue_composition_api__WEBPACK_IMPORTED_MODULE_2__["ref"])(1),pageSize=Object(_vue_composition_api__WEBPACK_IMPORTED_MODULE_2__["ref"])(10),handleSizeChange=t=>{pageSize.value=t,getDistributorWithdrawFunds()},handleCurrentChange=t=>{currentPage.value=t,getDistributorWithdrawFunds()},getTwoMonth=async()=>{const t=await getTwoMonthMutation();t&&(accountInfo.value.lastMonthCommission=JSON.parse(t.data.getTwoMonthDistributorWithdrawFunds).lastMonthAmount,accountInfo.value.currentMonthCommission=JSON.parse(t.data.getTwoMonthDistributorWithdrawFunds).thisMonthAmount)},tableData=Object(_vue_composition_api__WEBPACK_IMPORTED_MODULE_2__["ref"])([]),getDistributorWithdrawFunds=async()=>{const t=await getDistributorWithdrawFundsMutation();t&&(tableData.value=t.data.getDistributorWithdrawFundsAndCount.data,total.value=t.data.getDistributorWithdrawFundsAndCount.totalCount,console.log("------------------res=",tableData.value))},handleWithdrawal=()=>{currentUser.value.wxUserId?currentUser.value.realName?quasar_src_plugins_Dialog_js__WEBPACK_IMPORTED_MODULE_8__["a"].create({title:root.$t("People.confirm"),message:root.$t("Account.WithdrawalInfo"),ok:{label:root.$t("People.confirm"),noCaps:!0},cancel:{label:root.$t("People.cancel"),noCaps:!0,flat:!0},style:{zIndex:10002}}).onOk((async()=>{try{await distributorApplyWxIncomeTransferMutation();src_boot_notify__WEBPACK_IMPORTED_MODULE_7__["a"].success("提现申请已提交！"),getStatistics(),getBalance(),getTwoMonth()}catch(t){console.log(t),src_boot_notify__WEBPACK_IMPORTED_MODULE_7__["a"].error(t.message)}})):src_boot_notify__WEBPACK_IMPORTED_MODULE_7__["a"].error("请在个人资料填写真实姓名!"):src_boot_notify__WEBPACK_IMPORTED_MODULE_7__["a"].error("请绑定微信账号!")},detailDialog=Object(_vue_composition_api__WEBPACK_IMPORTED_MODULE_2__["ref"])(!1),handleWithdrawalDetail=()=>{detailDialog.value=!0,getDistributorWithdrawFunds()};return Object(_vue_composition_api__WEBPACK_IMPORTED_MODULE_2__["onMounted"])((()=>{getStatistics(),getBalance(),getTwoMonth(),getWxPaidOrders()})),{accountInfo:accountInfo,handleDetail:handleDetail,currentPage:currentPage,pageSize:pageSize,total:total,handleCurrentChange:handleCurrentChange,handleSizeChange:handleSizeChange,format:format,WithdrawalDetailData:WithdrawalDetailData,detailDialog:detailDialog,handleChangeDate:handleChangeDate,commissionDetailDialog:commissionDetailDialog,detailTableData:detailTableData,selectDate:selectDate,handleState:handleState,currentUser:currentUser,tableData:tableData,handleWithdrawal:handleWithdrawal,handleWithdrawalDetail:handleWithdrawalDetail}},methods:{handleCurrentChange2(t){this.currentPage2=t},handleSizeChange2(t){this.pageSize2=t},handleCurrentChange3(t){this.currentPage3=t},handleSizeChange3(t){this.pageSize3=t}}})},c746:function(t,e,a){"use strict";a("702b")}}]);
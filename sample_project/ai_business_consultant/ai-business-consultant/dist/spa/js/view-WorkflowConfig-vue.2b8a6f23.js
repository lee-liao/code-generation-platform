(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[30],{"33b8":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"mr-5 ml-5",staticStyle:{"font-size":"16px",position:"sticky"},attrs:{slot:"label"},slot:"label"},[a("el-dropdown",{staticClass:"mt-5 mx-10"},[a("span",{staticClass:"\n                 el-dropdown-link",staticStyle:{"font-size":"16px"}},[e._v("\n        "+e._s(e.currCaseType.name)),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{staticStyle:{width:"500px","max-height":"500px","overflow-y":"auto","overflow-x":"hidden"},attrs:{slot:"dropdown"},slot:"dropdown"},[1==e.currentUser.role||3==e.currentUser.role?a("el-dropdown-item",{staticStyle:{margin:"0",padding:"0"},attrs:{command:"1"}},[a("div",{staticStyle:{width:"100%","text-align":"center"},on:{click:e.handleCreateProject}},[e._v("\n            "+e._s(e.$t("flow.Createproject"))+"\n          ")])]):e._e(),a("el-input",{staticClass:"mb-1",attrs:{clearable:"",size:"small"},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),e._l(e.projectDatas.filter((function(t){return!e.searchName||t.name.toLowerCase().includes(e.searchName.toLowerCase())})),(function(t){return a("el-dropdown-item",{key:t.id,staticStyle:{margin:"0",padding:"0"},attrs:{command:"0",divided:""}},[a("div",{staticClass:"row ml-3",staticStyle:{width:"100%","text-align":"center"},on:{click:function(a){return e.handleProjectSelect(t)}}},[a("div",{staticClass:"\n               text-limiter"},[e._v(" "+e._s(t.name))]),a("div",{staticClass:" row"},[a("el-button",{attrs:{type:"text",disabled:1!=e.currentUser.role&&e.currentUser.id!=(null==t.creator?"":t.creator.id),icon:"el-icon-edit"},on:{click:function(a){return a.stopPropagation(),e.handleEdit(t)}}}),a("el-button",{attrs:{type:"text",disabled:1!=e.currentUser.role&&3!=e.currentUser.role,icon:"el-icon-document-copy"},on:{click:function(a){return a.stopPropagation(),e.handleCopy(t)}}}),a("el-button",{attrs:{type:"text",disabled:1!=e.currentUser.role&&e.currentUser.id!=(null==t.creator?"":t.creator.id),icon:"el-icon-delete"},on:{click:function(a){return a.stopPropagation(),e.handledelete(t)}}}),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.desc,placement:"right-start"}},[a("i",{staticClass:"el-icon-info  mt-3 ml-3 ",on:{click:function(a){return a.stopPropagation(),e.handleRemark(t)}}})])],1)])])}))],2)],1),a("el-button",{attrs:{type:"text",disabled:1!=e.currentUser.role&&e.currentUser.id!=e.currCaseType.id,icon:"el-icon-edit"},on:{click:function(t){return t.stopPropagation(),e.handleEdit(e.currCaseType)}}})],1),a("el-tabs",{staticClass:"mx-5 my-2",on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:e.$t("flow.Element"),name:"3"}},[a("Element")],1),a("el-tab-pane",{attrs:{label:e.$t("flow.Template"),name:"4"}},[a("Template")],1),a("el-tab-pane",{attrs:{label:e.$t("flow.Setting"),name:"5"}},[a("Service")],1),a("el-tab-pane",{attrs:{label:e.$t("chatbot.settings"),name:"6"}},[a("ChatBot")],1),a("el-tab-pane",{attrs:{label:e.$t("flow.Remark"),name:"7"}},[a("Remark")],1),a("el-tab-pane",{attrs:{label:e.$t("flow.Members"),name:"8"}},[a("Members")],1),a("el-tab-pane",{attrs:{label:e.$t("flow.tester"),name:"9"}},[a("Tester")],1)],1),a("el-dialog",{attrs:{title:"create"==e.action?e.$t("flow.Createproject"):"copy"==e.action?e.$t("flow.Copyproject"):e.$t("flow.Editproject"),"close-on-click-modal":!1,width:"30%",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",[a("el-form-item",{attrs:{label:e.$t("flow.CaseName")}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.caseInfo.name,callback:function(t){e.$set(e.caseInfo,"name",t)},expression:"caseInfo.name"}})],1),"create"==e.action?a("el-form-item",{attrs:{label:e.$t("flow.isCusult")}},[a("q-checkbox",{attrs:{"true-value":1,"false-value":0},model:{value:e.caseInfo.isConsult,callback:function(t){e.$set(e.caseInfo,"isConsult",t)},expression:"caseInfo.isConsult"}})],1):e._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(e._s(e.$t("profile.Cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v(e._s(e.$t("profile.Confirm")))])],1)],1)],1)},o=[],n=a("750b"),s=a("86c4"),r=a("1840"),c=a("b850"),i=a("ea33"),u=a("513a"),d=a("ab06"),m=a("57e3"),p=a("5a2a"),f=a("618b"),b=a("a97a"),v=a("86cd"),C=a("6eb7"),g=(a("cdde"),a("436b")),w=a("1f2a"),h={components:{Flow:i["default"],Element:u["default"],Template:d["default"],Service:m["default"],ChatBot:p["default"],Remark:f["default"],Members:b["default"],Tester:v["default"]},data(){return{}},setup(e,{root:t}){const a=Object(n["ref"])("诉讼状"),l=Object(n["reactive"])({name:"",desc:"",id:0,isConsult:0}),{mutate:o}=Object(r["useMutation"])(s["d"]),i=Object(n["computed"])(c["b"].currentUser),u=Object(n["reactive"])({creator:"",name:"",desc:"",id:0,isConsult:0}),d=Object(n["ref"])(!1),{mutate:m}=Object(r["useMutation"])(s["e"]),{mutate:p}=Object(r["useMutation"])(s["a"]),{mutate:f}=Object(r["useMutation"])(s["g"]),{mutate:b}=Object(r["useMutation"])(s["b"]),{mutate:v}=Object(r["useMutation"])(s["c"]),h=Object(n["ref"])("create"),y=async()=>{l.name="",l.desc="",l.isConsult=0,h.value="create",d.value=!0},j=async e=>{const t=await o({id:e});if(t){const e=t.data.getLegalDocumentProject;w["a"].$emit("switchNewProject",e)}},k=async e=>{h.value="edit",l.id=e.id,l.name=e.name,l.desc=e.desc,l.isConsult=e.isConsult,d.value=!0},x=Object(n["ref"])("3"),$=e=>{const t=e.lastIndexOf("-");if(-1===t)return e+"-1";const a=e.slice(t+1),l=parseInt(a,10);return isNaN(l)?e+"-1":e.slice(0,t+1)+(l+1)},I=async e=>{h.value="copy",l.id=e.id,l.name=$(e.name),d.value=!0},P=async e=>{u.id=e.id,u.name=e.name,u.desc=e.desc,u.isConsult=e.isConsult,u.creator=null==e.creator?"":e.creator.id,console.log("handleProjectSelect",u),sessionStorage.setItem("legalDocumentProjectId",u.id),j(e.id)},S=()=>{x.value="7"},N=async e=>{g["a"].create({title:t.$t("action.delTip"),message:t.$t("action.delTipText"),ok:{color:"red",label:t.$t("action.delete"),noCaps:!0},cancel:{label:t.$t("action.cancel"),noCaps:!0,flat:!0},style:{zIndex:10002}}).onOk((async()=>{try{await v({id:Number(e.id)}),Number(sessionStorage.getItem("legalDocumentProjectId"))==e.id&&sessionStorage.setItem("legalDocumentProjectId",null),D(),C["a"].success(t.$t("notify.Done"))}catch(a){console.log("---------error",a),C["a"].error(a.message)}}))},O=async()=>{if(""==l.name)return void C["a"].error("");const e={name:l.name};let a="";"create"==h.value?(e.isConsult=l.isConsult,a=await b({legalDocumentProject:e})):a="copy"==h.value?await p({projectName:l.name,id:l.id}):await f({id:l.id,legalDocumentProject:e}),a&&(C["a"].success(t.$t("notify.Done")),D()),d.value=!1},_=Object(n["ref"])([{id:1,name:"诉讼状"}]),D=async()=>{const e=await m();if(e){_.value=e.data.getLegalDocumentProjects;let t=sessionStorage.getItem("legalDocumentProjectId");if(0==_.value.length)return d.value=!0,u.id=-1,u.name="",void(u.creator="");if("null"===t||null===t||0==t)u.id=_.value[0].id,u.name=_.value[0].name,u.isConsult=_.value[0].isConsult,u.creator=null==_.value[0].creator?"":_.value[0].creator.id,sessionStorage.setItem("legalDocumentProjectId",_.value[0].id);else{const e=_.value.find((e=>e.id==Number(t)));u.id=e.id,u.name=e.name,u.isConsult=e.isConsult,u.creator=null==e.creator?"":e.creator.id}j(u.id)}return _.value};return Object(n["onMounted"])((()=>{D(),w["a"].$on("updateRemark",(()=>{D()}))})),{projectDatas:_,searchName:"",fileTypeValue:a,handleRemark:S,action:h,handleEdit:k,handleCopy:I,activeName:x,caseInfo:l,currCaseType:u,dialogFormVisible:d,handleSubmit:O,handleProjectSelect:P,handledelete:N,handleCreateProject:y,currentUser:i}},methods:{handleClick(e,t){console.log(e,t)}}},y=h,j=(a("4284"),a("2877")),k=a("8f8e"),x=a("eebe"),$=a.n(x),I=Object(j["a"])(y,l,o,!1,null,null,null);t["default"]=I.exports;$()(I,"components",{QCheckbox:k["a"]})},4284:function(e,t,a){"use strict";a("b3bc")},b3bc:function(e,t,a){}}]);
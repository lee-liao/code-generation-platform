(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{3682:function(e,t,a){"use strict";a("8ada")},4381:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-full h-full px-12"},[a("div",{staticStyle:{width:"100%",margin:"15px 0",display:"flex","justify-content":"space-between"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:e.$t("People.searchForName")},on:{input:e.handleInputSearch},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),1==e.currentUser.role?a("el-button",{attrs:{type:"primary"},on:{click:e.handleCreate}},[e._v("\n      "+e._s(e.$t("DistributorSplitRatio.addSplitRatio"))+"\n    ")]):e._e()],1),a("div",[a("el-table",{staticClass:"mb-5",staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),border:"",loading:e.Loading,"empty-text":e.$t("People.noData")}},[a("el-table-column",{attrs:{label:e.$t("data.particularsName"),align:"center","min-width":"100%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{width:"100%",display:"flex","align-items":"center","justify-content":"left","margin-left":"10px"}},[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.name))])])]}}])}),a("el-table-column",{attrs:{label:e.$t("data.particularsContent"),align:"center","min-width":"100%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{width:"100%",display:"flex","align-items":"center","justify-content":"left","margin-left":"10px"}},[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.content))])])]}}])}),1==e.currentUser.role?a("el-table-column",{attrs:{label:e.$t("People.action"),align:"center","min-width":"100%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("\n            "+e._s(e.$t("People.edit"))+"\n          ")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("\n            "+e._s(e.$t("People.delete"))+"\n          ")])]}}],null,!1,3061837012)}):e._e()],1),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,50],"page-size":e.pageSize,total:e.tableData.length,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{staticClass:"channel-dialog",attrs:{"close-on-click-modal":!1,visible:e.dialogPeopleVisible,title:e.createOrEditTitle,width:e.isMobile?"calc(100vw - 54px)":"calc(55% - 260px)","append-to-body":!0},on:{"update:visible":function(t){e.dialogPeopleVisible=t}}},[a("el-form",{ref:"peopleForm",attrs:{model:e.dataInfo,"label-width":"80px","label-position":"top"}},[a("el-form-item",{attrs:{label:e.$t("data.particularsName"),prop:"name"}},[a("el-input",{staticClass:"channel-input",attrs:{"validate-event":!1,autocomplete:"off"},model:{value:e.dataInfo.name,callback:function(t){e.$set(e.dataInfo,"name",t)},expression:"dataInfo.name"}})],1),a("el-form-item",{attrs:{label:e.$t("data.particularsContent"),prop:"describe"}},[a("el-input",{staticClass:"channel-input",attrs:{"validate-event":!1,type:"textarea",rows:8,autocomplete:"off"},model:{value:e.dataInfo.content,callback:function(t){e.$set(e.dataInfo,"content",t)},expression:"dataInfo.content"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogPeopleVisible=!1}}},[e._v(e._s(e.$t("People.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmitMessage}},[e._v(e._s(e.$t("People.confirm")))])],1)],1)],1)},l=[],o=a("750b"),i=a("b850"),r=a("1840"),s=a("5a0c"),c=a.n(s),u=a("6eb7"),p=a("436b"),d=a("5184");const f=d["a"]`
mutation createInformation ($information: InformationInput!)  {
    createInformation(information: $information) {
        name
}
  }
`,m=d["a"]`
mutation updateInformation ($id: Int!,$information: InformationInput!)  {
    updateInformation(id: $id,information: $information) {
        name

}
  }
`,b=d["a"]`
  mutation deleteInformation($id: Int!) {
    deleteInformation(id: $id)
  }
  `,g=d["a"]`
query getOrgInformations {
    getOrgInformations {
        id
        name
     content
  }
}
`;var v=a("fadb"),h=Object(o["defineComponent"])({data(){return{isMobile:Object(v["a"])()}},mounted(){Object(v["b"])(this,"isMobile")},setup(e,{root:t}){const a=Object(o["ref"])(!1),n=Object(o["ref"])([]),l=Object(o["computed"])(i["b"].currentUser),s=Object(o["ref"])([]),{mutate:d}=Object(r["useMutation"])(g),v=async()=>{try{a.value=!0;const{data:{getOrgInformations:e}}=await d();n.value=e,s.value=e,a.value=!1,console.log(s.value)}catch(e){console.log("----------getPeople error")}},h=(e,t="YYYY/MM/DD  HH:mm:ss")=>e?c()(e).format(t):e,$=e=>{let t=h(e.createdAt);return t},P=e=>{switch(e.role){case 1:return t.$t("People.Administrators");case 2:return t.$t("People.Lawyer");case 3:return t.$t("People.Operator");case 4:return t.$t("People.Finance");case 5:return t.$t("People.Distributor");case 6:return t.$t("People.DistributorAdmin")}},y=[{value:1,label:t.$t("People.Administrators")},{value:2,label:t.$t("People.Lawyer")},{value:3,label:t.$t("People.Operator")},{value:4,label:t.$t("People.Finance")},{value:5,label:t.$t("People.Distributor")},{value:6,label:t.$t("People.DistributorAdmin")}],w=Object(o["ref"])(""),O=()=>{s.value=n.value.filter((e=>e.name.includes(w.value))),console.log(w.value,s.value)},x=Object(o["ref"])(!1),I=Object(o["ref"])(""),j=Object(o["ref"])({name:"",content:""}),S=()=>{I.value=t.$t("People.add"),j.value={...j.value,name:"",content:""},x.value=!0},_=Object(o["ref"])(""),C=(e,a)=>{I.value=t.$t("People.edit"),j.value={name:a.name,content:a.content},_.value=a.id,console.log(_.value),x.value=!0},D=Object(o["ref"])(null),k={name:[{required:!0,message:t.$t("Distributor.DistributorMessage"),trigger:"blur"}]},{mutate:M}=Object(r["useMutation"])(f),{mutate:z}=Object(r["useMutation"])(m),V=()=>{D.value&&D.value.validate((async e=>{if(e){const e={name:j.value.name,content:j.value.content};try{if(I.value==t.$t("People.add")){const a=await M({information:e});console.log(a),v(),u["a"].success(t.$t("People.succeed"))}else{const a=await z({information:e,id:_.value});console.log(a),v(),u["a"].success(t.$t("People.succeed"))}x.value=!1,j.value={name:"",content:""},console.log(j.value)}catch(a){u["a"].error("资料名称已存在!")}}}))},{mutate:A}=Object(r["useMutation"])(b),E=async(e,a)=>{p["a"].create({title:t.$t("People.confirm"),message:t.$t("DistributorSplitRatio.confirmDelete"),ok:{label:t.$t("People.confirm"),noCaps:!0},cancel:{label:t.$t("People.cancel"),noCaps:!0,flat:!0},style:{zIndex:10002}}).onOk((async()=>{u["a"].success(t.$t("People.succeed")),await A({id:a.id}),v(),u["a"].success(t.$t("People.succeed"))}))},F=Object(o["ref"])(1),R=Object(o["ref"])(10),L=e=>{R.value=e},U=()=>{t.$router.go(-1)},Y=e=>{F.value=e};return Object(o["onMounted"])((()=>{v()})),{tableData:s,searchValue:w,handleInputSearch:O,currentPage:F,pageSize:R,handleSizeChange:L,handleCurrentChange:Y,formatterTime:$,formatterRole:P,currentUser:l,roleOptions:y,dialogPeopleVisible:x,createOrEditTitle:I,dataInfo:j,peopleRules:k,peopleForm:D,handleCreate:S,handleEdit:C,handleDelete:E,handleSubmitMessage:V,Loading:a,goOff:U}}}),$=h,P=(a("3682"),a("2877")),y=Object(P["a"])($,n,l,!1,null,"918f53c8",null);t["default"]=y.exports},"8ada":function(e,t,a){}}]);